= Spell Writing Handbook =

== Introduction ==

This is a technical reference document.

The [[Spell/Writing Handbook#head-1-2|first]] part describes all of the files that are checked for in a [[Spell|spell]], their purpose, and documented attributes. \\ The [[Spell/Writing Handbook#head-1-3|second]] part describes the standards we use in the [[Grimoire|grimoire]].
----

== Spell files ==

These are the files used during a [[Sorcery/Commands/Cast|cast]], in their execution order:

* [[Spell/Files/PREPARE|PREPARE]] -- Useful for those rare times when the DETAILS file needs to be modified or the spell or package needs to be configured before the DETAILS file is executed.
* [[Spell/Files/DETAILS|DETAILS]] -- Informational file, required for all spells.
* [[Spell/Files/CONFIGURE|CONFIGURE]] -- Used to select and modify a package's compile time options.
* [[Spell/Files/DEPENDS|DEPENDS]] -- Lists all other spells that are required or optionally required to be cast.

(…Processing of the depended on spells…)

(…DETAILS is run again…)

* [[Spell/Files/CONFLICTS|CONFLICTS]]
* [[Spell/Files/PRE_BUILD|CONFLICTS]]
* [[Spell/Files/BUILD|BUILD]]
* [[Spell/Files/PRE_INSTALL]]
* [[Spell/Files/INSTALL|INSTALL]]
* [[Spell/Files/FINAL|FINAL]]
* [[Spell/Files/TRIGGERS|TRIGGERS]]

(…The triggered spells are cast now…)

These are the files used during the download, in their execution order:

* [[Spell/Files/DOWNLOAD|DOWNLOAD]]

These are the files used during a [[Sorcery/Commands/Dispel|dispel]], in their execution order:

* [[Spell/Files/PRE_REMOVE|PRE_REMOVE]]
* [[Spell/Files/POST_REMOVE|POST_REMOVE]]

These are the files used during a resurrect, in their execution order:

* [[Spell/Files/PRE_RESURRECT|PRE_RESURRECT]]
* [[Spell/Files/POST_RESURRECT|POST_RESURRECT]]

These files are processed during a {{{`scribe update`}}}, {{{`cleanse --tablet`}}}, or {{{`cleanse --tablet_spell`}}}, in their execution order:

* [[Spell/Files/REPAIR|REPAIR^* files]]

These files are known as [[Spell/Files/Filters|spell filters]]:

* excluded
* protected
* volatiles
* configs

These are the other files:

* [[Spell/Files/HISTORY|HISTORY]]
* [[Spell/Files/PROVIDES|PROVIDES]]
* services
* init.d directory
* pam.d directory
* xinetd.d directory

== Standards ==

* General rule: no tabs except in HISTORY, align '='s in DETAILS, and use newlines.
* For other formatting rules, check the appropriate spell file pages above.
* [[Spell/Multi version|Multi version spells]] -- the standard for spells with multiple versions.